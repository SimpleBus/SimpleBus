language: php

matrix:
  include:
    - php: 7.1
    - php: 7.2
      env: SYMFONY_VERSION=2.7.*
    - php: 7.2
      env: SYMFONY_VERSION=2.8.*
    - php: 7.2
      env: SYMFONY_VERSION=3.3.*
    - php: 7.2
      env: SYMFONY_VERSION=3.4.*
    - php: 7.2
      env: SYMFONY_VERSION=4.0.*
    - php: 7.2
      env: DOCTRINE_VERSION=2.2.*
    - php: 7.2
      env: DOCTRINE_VERSION=2.3.*
    - php: 7.2
      env: DOCTRINE_VERSION=2.4.*
    - php: 7.2
      env: DOCTRINE_VERSION=2.5.*
    - php: 7.2
      env: DOCTRINE_VERSION=2.6.*

jobs:
  include:
    - stage: Bridge/Doctrine-DBAL-Bridge
      install:
        - cd Bridge/DoctrineDBALBridge
        - composer self-update
        - composer require --no-update doctrine/orm:${DOCTRINE_VERSION}
        - composer install --prefer-dist
      script:
        - vendor/bin/phpunit

    - stage: Bridge/Doctrine-DBAL-Bridge2
      install:
        - cd Bridge/DoctrineDBALBridge
        - composer self-update
        - composer require --no-update doctrine/orm:${DOCTRINE_VERSION}
        - composer install --prefer-dist
      script:
        - vendor/bin/phpunit
