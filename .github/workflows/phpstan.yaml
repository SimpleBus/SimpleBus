name: PHPStan

on: [ push ]

env:
    COMPOSER_ROOT_VERSION: "dev-main"

jobs:
    phpstan:
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v2
            - uses: shivammathur/setup-php@v2
              with:
                  php-version: 7.4
                  coverage: none
              env:
                  COMPOSER_TOKEN: ${{ secrets.GITHUB_TOKEN }}
            - run: composer install --no-progress --ansi
            - run: ./vendor/bin/phpstan analyze
